!function(t){Craft.ClearCachesUtility=Garnish.Base.extend({init:function(e){this.addListener(t("form.utility"),"submit","onSubmit")},onSubmit:function(e){e.preventDefault();let a,r,s=t(e.currentTarget),o=s.find("button.submit"),i=s.find(".utility-status");o.hasClass("disabled")||(s.data("progressBar")?(a=s.data("progressBar"),a.resetProgressBar(),r=s.data("allDone")):(a=new Craft.ProgressBar(i),s.data("progressBar",a)),a.$progressBar.removeClass("hidden"),a.$progressBar.velocity("stop").velocity({opacity:1},{complete:t.proxy((function(){let e=Garnish.getPostData(s),n=Craft.expandPostArray(e);Craft.postActionRequest(n.action,n,(e,n)=>{e&&e.error&&alert(e.error),a.setProgressPercentage(100),setTimeout(()=>{r||(r=t('<div class="alldone" data-icon="done" />').appendTo(i),r.css("opacity",0),s.data("allDone",r)),a.$progressBar.velocity({opacity:0},{duration:"fast",complete:()=>{r.velocity({opacity:1},{duration:"fast"}),o.removeClass("disabled"),o.trigger("focus")}})},300)},{complete:t.noop})}),this)}),r&&r.css("opacity",0),o.addClass("disabled"),o.trigger("blur"))}})}(jQuery);
//# sourceMappingURL=ClearCachesUtility.min.js.map
